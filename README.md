# Operating Systems and System Programming (OSSP)

Проект по курсу "Операционные системы и системное программирование" с поддержкой 8 заданий.

## Описание

Проект представляет собой набор из 8 заданий по системному программированию на языке C. Каждое задание реализовано в отдельном модуле и может быть запущено через единую точку входа с указанием номера задания.

## Структура проекта

```
ossp/
├── src/                    # Исходные файлы
│   ├── main.c             # Главный файл с логикой выбора заданий
│   ├── task1.c            # Задание 1: Работа с файлами
│   ├── task2.c            # Задание 2: Примитивная оболочка командной строки
│   ├── task3.c            # Задание 3: Копирование файлов
│   ├── task4.c            # Задание 4: Побайтовая обработка файлов
│   ├── task5.c            # Задание 5: [Будущее задание]
│   ├── task6.c            # Задание 6: [Будущее задание]
│   ├── task7.c            # Задание 7: [Будущее задание]
│   └── task8.c            # Задание 8: [Будущее задание]
├── include/               # Заголовочные файлы
│   ├── task1.h            # Заголовок для задания 1
│   ├── task2.h            # Заголовок для задания 2
│   ├── task3.h            # Заголовок для задания 3
│   ├── task4.h            # Заголовок для задания 4
│   ├── task5.h            # Заголовок для задания 5
│   ├── task6.h            # Заголовок для задания 6
│   ├── task7.h            # Заголовок для задания 7
│   └── task8.h            # Заголовок для задания 8
├── build/                 # Собранные файлы
│   └── bin/
│       └── OSSP_Project.exe
├── .vscode/              # Настройки VS Code
│   ├── launch.json       # Конфигурации отладки
│   └── tasks.json        # Задачи сборки
├── CMakeLists.txt        # Конфигурация CMake
└── README.md             # Этот файл
```

## Использование

### Использование в WSL дистрибутиве docker-desktop
```bash
su -
apk update
apk add sudo
adduser root wheel
sudo apk update
sudo apk add build-base cmake gdb
```
### Компиляция

```bash
# Генерация файлов сборки
cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug -G "MinGW Makefiles"

# Сборка проекта
cmake --build build --config Debug --target OSSP_Project
```

### Запуск

```bash
# Общий синтаксис
./build/bin/OSSP_Project.exe <номер_задания> [аргументы]

# Примеры использования:
./build/bin/OSSP_Project.exe 1 -f test.bin                    # Задание 1 с файлом
./build/bin/OSSP_Project.exe 2                                # Задание 2 - оболочка командной строки
./build/bin/OSSP_Project.exe 3 source.txt backup.txt          # Задание 3 - копирование файлов
./build/bin/OSSP_Project.exe 4 data.bin xor8                  # Задание 4 - побайтовая обработка
# ... и так далее для заданий 5-8
```

### Справка

```bash
./build/bin/OSSP_Project.exe
# Покажет справку по использованию
```

## Задания

### Задание 1: Работа с файлами
- **Описание**: Демонстрация работы с файлами в C (создание, запись, чтение, позиционирование)
- **Аргументы**: Требует флаг `-f` и имя файла
- **Пример**: `./OSSP_Project.exe 1 -f test.bin`

### Задание 2: Примитивная оболочка командной строки
- **Описание**: Реализация примитивной оболочки с авторизацией пользователей и командами
- **Функции**: Регистрация/вход пользователей, команды Time, Date, Howmuch, Logout, Sanctions
- **Аргументы**: Не требует дополнительных аргументов
- **Пример**: `./OSSP_Project.exe 2`

### Задание 3: Копирование файлов
- **Описание**: Консольное приложение для копирования файлов с проверкой идентичности
- **Функции**: Копирование произвольных файлов, проверка целостности, валидация
- **Аргументы**: Требует исходный и целевой файлы
- **Пример**: `./OSSP_Project.exe 3 source.txt backup.txt`

### Задание 4: Побайтовая обработка файлов
- **Описание**: Консольное приложение для побайтовой обработки файлов
- **Функции**: 
  - `xor8` - сложение по модулю 2 всех байтов файла
  - `xorodd` - сложение по модулю 2 четырехбайтовых подпоследовательностей с простыми числами
  - `mask <hex>` - подсчет четырехбайтовых чисел, соответствующих маске
- **Аргументы**: Требует файл, флаг и опциональные параметры
- **Примеры**: 
  - `./OSSP_Project.exe 4 data.bin xor8`
  - `./OSSP_Project.exe 4 data.bin xorodd`
  - `./OSSP_Project.exe 4 data.bin mask FF00FF00`

### Задания 5-8: [Будущие задания]
- **Описание**: Заглушки для будущих заданий
- **Аргументы**: Не требуют дополнительных аргументов
- **Пример**: `./OSSP_Project.exe 5`

## Отладка в VS Code

Проект настроен для отладки в VS Code с универсальной конфигурацией:

- **Debug Custom Task** - универсальная конфигурация для всех заданий
  - При запуске запрашивает номер задания (1-8)
  - Для задания 1: введите `-f filename` (например: `-f test.bin`)
  - Для задания 3: введите `source.txt dest.txt` (например: `test.txt backup.txt`)
  - Для задания 4: введите `file.bin flag [params]` (например: `data.bin xor8` или `data.bin mask FF00FF00`)
  - Для заданий 2, 5-8: оставьте поле пустым

## Особенности реализации

### Задание 2: Оболочка командной строки
- **Авторизация**: Система регистрации и входа с логином (до 6 символов) и PIN-кодом (0-100000)
- **Безопасность**: Скрытый ввод PIN-кода (отображаются звездочки)
- **Команды**:
  - `Time` - текущее время в формате ЧЧ:ММ:СС
  - `Date` - текущая дата в формате ДД:ММ:ГГГГ
  - `Howmuch <datetime> flag` - расчет времени с указанной даты
  - `Logout` - выход из системы
  - `Sanctions <username>` - ограничения для пользователя
- **Кроссплатформенность**: Поддержка Windows и Unix/Linux

### Задание 3: Копирование файлов
- **Буферизация**: Эффективное копирование с буфером 4KB
- **Валидация**: Проверка существования файлов и размеров
- **Проверка целостности**: Побайтовое сравнение после копирования
- **Обработка ошибок**: Детальные сообщения об ошибках

### Задание 4: Побайтовая обработка
- **XOR8**: Побайтовое XOR всех байтов файла
- **XORODD**: Обработка 4-байтовых блоков с простыми числами
- **MASK**: Подсчет чисел по шестнадцатеричной маске
- **Оптимизация**: Эффективные алгоритмы проверки простых чисел

## Технические требования

- **Стандарт C**: C17
- **Компилятор**: GCC (MinGW)
- **Система сборки**: CMake 3.10+
- **Отладчик**: GDB

## Настройки компилятора

- `-Wall -Wextra -pedantic` - строгие предупреждения
- `-g -O0` - отладочная информация (Debug)
- `-O3` - оптимизация (Release)

## Лицензия

См. файл [LICENSE](LICENSE)